#语法索引

由于本章涉及大量新语法，故在本章开头列出新语法的索引，方便大家在使用这些新语法时能快速查找到对应的讲解：

-   declare var 声明全局变量
-   declare function 声明全局方法
-   declare class 声明全局类
-   declare enum 声明全局枚举类型
-   declare namespace 声明（含有子属性的）全局对象
-   interface 和 type 声明全局类型
-   export 导出变量
-   export namespace 导出（含有子属性的）对象
-   export default ES6 默认导出
-   export = commonjs 导出模块
-   export as namespace UMD 库声明全局变量
-   declare global 扩展全局变量
-   declare module 扩展模块
-   /// <reference /> 三斜线指令

##什么是声明语句

假如我们使用的是 JQuery，一种常见的方式是 html 中通过`<script>`标签引入的 JQuery,然后可以使用全局变量`$`或者`JQuery`了。

我们通常会获取一个`id`是`foo`的元素：

```
$('#foo');
// or
jQuery('#foo');
```

但是在 ts 中，编译器并不知道 $ 或 jQuery 是什么东西：

```
jQuery('#foo');
// ERROR: Cannot find name 'jQuery'.
```

这时，我们需要使用 declare var 来定义它的类型：

```
declare var jQuery: (selector: string) => any;

jQuery('#foo');
```

上例中，declare var 并没有真的定义一个变量，只是定义了全局变量 jQuery 的类型，仅仅会用于编译时的检查，在编译结果中会被删除。它编译结果是：

```
jQuery('#foo');
```

##什么是声明文件
通常我们会把声明语句放到一个单独的文件（jQuery.d.ts）中，这就是声明文件：

```
// src/jQuery.d.ts

declare var jQuery: (selector: string) => any;
```

声明文件必需以 .d.ts 为后缀

一般来说，ts 会解析项目中所有的 _.ts 文件，当然也包含以 .d.ts 结尾的文件。所以当我们将 jQuery.d.ts 放到项目中时，其他所有 _.ts 文件就都可以获得 jQuery 的类型定义了。

假如仍然无法解析，那么可以检查下 tsconfig.json 中的 files、include 和 exclude 配置，确保其包含了 jQuery.d.ts 文件。

###第三方声明文件

当然，jQuery 的声明文件不需要我们定义了，社区已经帮我们定义好了
[jQuery in DefinitelyTyped](https://github.com/DefinitelyTyped/DefinitelyTyped/tree/master/types/jquery/index.d.ts)

我们可以直接下载下来使用，但是更推荐的是使用 @types 统一管理第三方库的声明文件。@types 的使用方式很简单，直接用 npm 安装对应的声明模块即可，以 jQuery 举例：

```
npm install @types/jquery --save-dev
```

可以在[这个页面](https://microsoft.github.io/TypeSearch/)搜索你需要的声明文件
